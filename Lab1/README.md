# Лабораторная работа 1 — Wget на минималках

**СТУДЕНТ**: Фам Ань Ту  
**ГРУППА**: 932101  

Эта работа размещена на GitHub.

Это программа на Python, которая загружает содержимое веб-страницы по указанному URL и сохраняет его в виде файла HTML. Программа имеет механизм отображения хода загрузки в реальном времени и автоматически переименовывает файл в соответствии с заголовком страницы, если он доступен.

## Как работает

1. **Ввод URL**:  
   Пользователь вводит URL веб-страницы, которую нужно загрузить. Программа поддерживает URL-адреса, начинающиеся с `http://` или `https://`.

2. **Анализ URL**:  
   - Программа разбивает URL на компоненты (домен и путь) для установления HTTP или HTTPS соединения.
   - Если URL имеет неправильный формат, программа сообщит об ошибке.

3. **Загрузка содержимого веб-страницы**:  
   - Отправляется HTTP GET-запрос к серверу для получения содержимого веб-страницы.
   - Содержимое загружается небольшими частями (chunk) для повышения эффективности и экономии памяти.

4. **Отображение хода загрузки**:  
   - Во время загрузки отдельный поток будет постоянно обновлять количество загруженных байтов и текущее время.
   - Этот процесс выполняется параллельно с основной загрузкой благодаря использованию библиотеки `threading`.

5. **Сохранение загруженного файла**:  
   - Содержимое временно сохраняется под именем файла по умолчанию — `file.html`.
   - После завершения загрузки программа проверяет наличие тега `<title>` в содержимом HTML с помощью библиотеки `BeautifulSoup`:
     - Если найден допустимый заголовок, файл будет переименован в соответствии с заголовком (удаляя недопустимые символы).
     - Если заголовок отсутствует, файл сохранится с именем по умолчанию.

6. **Завершение и уведомление**:  
   - После завершения загрузки программа выводит сообщение о количестве загруженных байтов и имени сохраненного файла.
   - Пользователь может ввести другой URL или завершить работу программы, введя `q`.

---

## Используемые библиотеки

### 1. **`http.client`**
- `http.client` — это встроенный модуль Python для выполнения HTTP- и HTTPS-запросов.  
- В данной программе:
  - `http.client.HTTPConnection` используется для отправки HTTP-запросов при URL, начинающихся с `http://`.
  - `http.client.HTTPSConnection` используется для HTTPS-запросов при URL, начинающихся с `https://`.
  - Программа создает соединение с сервером на основе домена и пути, извлеченных из URL.
  - Метод `request()` отправляет GET-запрос, а `getresponse()` принимает ответ от сервера.
  - Ответ сервера считывается частями и сохраняется в локальный файл.

### 2. **`threading`**
- Библиотека `threading` в Python предоставляет возможность создавать и управлять потоками для выполнения задач параллельно.  
- В данной программе:
  - `threading` используется для отображения хода загрузки параллельно с основной загрузкой содержимого.
  - Отдельный поток создается с помощью `threading.Thread`, чтобы каждую секунду выводить количество загруженных байтов и текущее время.
  - Это обеспечивает отзывчивость программы и позволяет пользователю видеть ход загрузки в реальном времени.

### 3. **`BeautifulSoup`**
- Библиотека `BeautifulSoup` — это мощный инструмент для анализа и извлечения данных из HTML- или XML-документов.  
- В данной программе:
  - `BeautifulSoup` используется для анализа содержимого загруженного HTML-файла.
  - Метод `soup.title.string` извлекает тег `<title>` веб-страницы.
  - Этот заголовок используется для переименования сохраненного файла, чтобы пользователю было проще определить содержимое.

---

## Запуск программы
### Шаг 1: Создать виртуальное окружение
```bash
 python -m venv venv
 venv\Scripts\activate
```
### Шаг 2: Установить зависимости
```bash
 pip install -r requirements.txt
```
### Шаг 3: Запустить программу
```bash
 py tu.py
```
